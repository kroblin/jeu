{% extends 'base.html.twig' %}

{% block body %}
    {% for carte in terrainJ1 %}
        <p>{{ carte.0 }}-Colone {{ carte.1 }}-Ligne {{ carte.2 }}</p>
    {% endfor %}

    <div id="plateau">
        <div class="mainJ2">
            {% for idCarte in  partie.mainJ2 %}
                <div class="carteMain draggable"
                     style="background-color:{{ cartes[idCarte].couleur }};">{{ cartes[idCarte].puissance }}</div>
            {% endfor %}
        </div>
        <div class="tuilesJ2">
            {% for i in 1..9 %}
                <div class="tuile">-</div>
            {% endfor %}
        </div>
        <div class="cartesJ2">
            {% for j in 1..3 %}
                <div class="ligne">
                    {% for i in 1..9 %}
                        <div class="carte" data-ligne="{{ j }}" data-colonne="{{ i }}">-</div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
        <div class="tuiles">
            {% for i in 1..9 %}
                <div class="tuile">Tuile {{ i }}</div>
            {% endfor %}
        </div>
        <div class="cartesJ1">
            {% for j in 1..3 %}
                <div class="ligne">
                    {% for i in 1..9 %}
                        <div class="carte droppable" data-ligne="{{ j }}" data-colonne="{{ i }}">-</div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
        <div class="tuilesJ2">
            {% for i in 1..9 %}
                <div class="tuile ">-</div>
            {% endfor %}
        </div>
        <div class="mainJ1"><br>
            {% for idCarte in  partie.mainJ1 %}
                <div class="carteMain draggable"
                     data-carte="{{ cartes[idCarte].id }}"
                     style="background-color:{{ cartes[idCarte].couleur }};">{{ cartes[idCarte].puissance }}</div>
            {% endfor %}

        </div>

    </div>


{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $( function() {
            $( ".draggable" ).draggable({ revert: 'invalid' });
            $( ".droppable" ).droppable({
                accept: ".draggable",
                classes: {
                },
                drop: function( event, ui ) {
                    $(".draggable").removeClass("draggable", "ui-draggable", 'ui-draggable-handle"');
                    $(".ui-droppable").removeClass("ui-droppable");
                    $.ajax({
                        url: "{{ path('depose_carte', { idPartie:partie.id }) }}",
                        method: 'POST',
                        data: {
                            carte: ui.draggable.data('carte'),//data-carte dans le HTML pour chaque carte
                            colonne: $(this).data('colonne'), //colonne du plateau de jeu data-colonne
                            ligne: $(this).data('ligne') //ligne du plateau de jeu data-ligne
                        },
                        success: function(){
                        }
                    })
                }
            });
        } );
    </script>
{% endblock %}


{% block title %}

{% endblock %}

